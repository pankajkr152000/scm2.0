<!DOCTYPE html>
<html class="dark" lang="en" th:fragment="parent(content, title, script)" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-th-replace="${title}"></title>
    <link th:href="@{https://cdn.jsdelivr.net/npm/flowbite@3.1.2/dist/flowbite.min.css}" rel="stylesheet" />
    <link rel="stylesheet" data-th-href="@{'/css/output.css'}" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
        integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>

<body class="bg-yellow-50 dark:bg-gray-900 min-h-screen">
    <!-- Navbar -->
     <!-- if user is logged in -->
    <div th:if="${loggedInUser}">
        <section data-th-replace="~{user/userNavbar :: user-navbar-header}"></section>
    </div>
     <!-- unless login user navbar -->
    <div th:unless="${loggedInUser}">
        <section data-th-replace="~{navbar :: navbar-header}"></section>
    </div>

    <!-- Main content -->
    <div class="w-full p-4">
        <section data-th-replace="${content}"></section>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/flowbite@3.1.2/dist/flowbite.min.js"></script>
    <script data-th-src="@{/js/script.js}"></script>
    <th:block data-th-replace="${script}"></th:block>
    
    <!-- 1️⃣ Eye Toggle Script (REQUIRED) -->
    <script>
    function togglePassword(fieldId) {
        const input = document.getElementById(fieldId);
        const eyeOpen = document.getElementById(fieldId + "-eye-open");
        const eyeClosed = document.getElementById(fieldId + "-eye-closed");

        if (!input) return;

        if (input.type === "password") {
            input.type = "text";
            eyeOpen.classList.add("hidden");
            eyeClosed.classList.remove("hidden");
        } else {
            input.type = "password";
            eyeOpen.classList.remove("hidden");
            eyeClosed.classList.add("hidden");
        }
    }
    </script>

    <!-- 2️⃣ Password Copy/Paste Protection (RECOMMENDED) -->
    <script>
    document.addEventListener("DOMContentLoaded", () => {
        document.querySelectorAll("input[type='password']").forEach(input => {
            ["copy", "paste", "cut", "drag", "drop"].forEach(evt => {
                input.addEventListener(evt, e => e.preventDefault());
            });
        });
    });
    </script>
</body>

</html>
